#!/bin/bash
#sudo apt-get install siege ?

CONCURRENT_CONNECTIONS=1000

if [ $# -ne 1 ]
then 
  echo "Using default concurrent connection number"
else
 CONCURRENT_CONNECTIONS=$1 
fi

SERVER_TO_TESTLOCAL="127.0.0.1:8080"
SERVER_TO_TESTAWAY="192.168.20.8:8080"
#SERVER_TO_TESTAWAY="139.91.185.28"
SERVER_TO_TEST="$SERVER_TO_TESTLOCAL"

siege -c "$CONCURRENT_CONNECTIONS" -i -t 1m -d 3 "$SERVER_TO_TEST"
echo "Finished with $SERVER_TO_TEST" 

exit 0
