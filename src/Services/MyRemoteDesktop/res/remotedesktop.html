<html>
 <head>
   <meta http-equiv=\"refresh\" content=\"1\">
   <title>MyRemoteDesktop</title>
   <script type="text/javascript">  
    
   function httpGet(theUrl)
    {
    var xmlHttp = null;
    xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, true ); //Second parameter is async
    xmlHttp.send( null );
    return xmlHttp.responseText;
    } 
    
    function command(theCommand)
     {
       var randomnumber=Math.floor(Math.random()*100000);
       httpGet("cmd?"+theCommand+"&t="+randomnumber); 
     } 

   function refreshScreen()
   {  
      var randomnumber=Math.floor(Math.random()*100000);

      var screenImage = document.getElementById('screenImage');
      screenImage.src='screen.jpg?t='+randomnumber; 
   } 

   function doMovement(e) 
   {
    img = document.getElementById("screenImage");

    var x = img.naturalWidth * ( e.clientX / img.width ) ;
    var y = img.naturalHeight * ( e.clientY / img.height );
     
    var coor = "Coordinates: (" + x + "," + y + ")";
    document.getElementById("coordinates").innerHTML = coor;
    command("x="+x+"&y="+y);
   }

  function clearCoordinates() 
  {
    document.getElementById("coordinates").innerHTML = "";
  }

  function autoRefreshScreen()
  {
    refreshScreen();
  }
  



  </script>
</head>
<body onload="setTimeout('autoRefreshScreen();',500);">
  <img 
   id="screenImage" 
   src="screen.jpg" 
   width="100%" 
   onclick="cmd?click=1" 
   ondblclick="cmd?dblclick=1"
   onmouseup="cmd?mouseup=1"
   onmousedown="cmd?mousedown=1"
   onmousemove="doMovement(event)" 
   onmouseout="clearCoordinates()"
  ><br>

 <p id="coordinates"></p>
 <a href="#" onclick="refreshScreen();">Refresh</a>
</body>

</head>

